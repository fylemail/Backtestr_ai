# BackTestr_ai Full-Stack Architecture Document

## Table of Contents

- [BackTestr_ai Full-Stack Architecture Document](#table-of-contents)
  - [Introduction](./introduction.md)
    - [Starter Template or Existing Project](./introduction.md#starter-template-or-existing-project)
    - [Change Log](./introduction.md#change-log)
  - [System Overview](./system-overview.md)
    - [High-Level Architecture Overview](./system-overview.md#high-level-architecture-overview)
    - [Major Components and Their Relationships](./system-overview.md#major-components-and-their-relationships)
      - [1. Main Process (Rust + Embedded Python)](./system-overview.md#1-main-process-rust-embedded-python)
      - [2. UI Process (Electron + React)](./system-overview.md#2-ui-process-electron-react)
      - [3. Inter-Process Communication](./system-overview.md#3-inter-process-communication)
      - [4. Data Storage Layer](./system-overview.md#4-data-storage-layer)
    - [Data Flow Between Components](./system-overview.md#data-flow-between-components)
      - [Detailed Data Flow Sequence](./system-overview.md#detailed-data-flow-sequence)
    - [Key Architectural Patterns Used](./system-overview.md#key-architectural-patterns-used)
      - [1. Hybrid Process Architecture](./system-overview.md#1-hybrid-process-architecture)
      - [2. Embedded Database Pattern](./system-overview.md#2-embedded-database-pattern)
      - [3. Multi-Timeframe State Synchronization](./system-overview.md#3-multi-timeframe-state-synchronization)
      - [4. Language Bridge Pattern (PyO3)](./system-overview.md#4-language-bridge-pattern-pyo3)
      - [5. Replay Engine Pattern](./system-overview.md#5-replay-engine-pattern)
      - [6. Batched IPC Pattern](./system-overview.md#6-batched-ipc-pattern)
      - [7. Component-Based UI Architecture](./system-overview.md#7-component-based-ui-architecture)
      - [8. Repository Pattern for Data Access](./system-overview.md#8-repository-pattern-for-data-access)
  - [Technology Stack](./technology-stack.md)
    - [Frontend Technologies](./technology-stack.md#frontend-technologies)
      - [Primary UI Framework](./technology-stack.md#primary-ui-framework)
      - [Visualization and Charts](./technology-stack.md#visualization-and-charts)
      - [State Management and Data Flow](./technology-stack.md#state-management-and-data-flow)
      - [Styling and UI Components](./technology-stack.md#styling-and-ui-components)
    - [Backend Technologies](./technology-stack.md#backend-technologies)
      - [Core Engine](./technology-stack.md#core-engine)
      - [Algorithm Execution Environment](./technology-stack.md#algorithm-execution-environment)
      - [Data Storage and Management](./technology-stack.md#data-storage-and-management)
      - [Inter-Process Communication](./technology-stack.md#inter-process-communication)
    - [Development Tools](./technology-stack.md#development-tools)
      - [Build and Package Management](./technology-stack.md#build-and-package-management)
      - [Testing Frameworks](./technology-stack.md#testing-frameworks)
      - [Code Quality and Analysis](./technology-stack.md#code-quality-and-analysis)
      - [Development Environment](./technology-stack.md#development-environment)
      - [Windows Development Container Strategy](./technology-stack.md#windows-development-container-strategy)
    - [Infrastructure & Deployment](./technology-stack.md#infrastructure-deployment)
      - [Desktop Application Packaging](./technology-stack.md#desktop-application-packaging)
      - [Update Management](./technology-stack.md#update-management)
      - [Performance Monitoring and Analytics](./technology-stack.md#performance-monitoring-and-analytics)
      - [Backup and Data Management](./technology-stack.md#backup-and-data-management)
  - [Source Tree](./source-tree.md)
    - [Project Structure Overview](./source-tree.md#project-structure-overview)
    - [Key Directory Conventions](./source-tree.md#key-directory-conventions)
    - [Build Artifacts Location](./source-tree.md#build-artifacts-location)
  - [Coding Standards](./coding-standards.md)
    - [Development Standards Overview](./coding-standards.md#development-standards-overview)
    - [Rust Code Standards](./coding-standards.md#rust-code-standards)
    - [Python Code Standards](./coding-standards.md#python-code-standards)
    - [TypeScript/React Standards](./coding-standards.md#typescriptreact-standards)
    - [Quality Assurance Standards](./coding-standards.md#quality-assurance-standards)
  - [Backend Architecture](./backend-architecture.md)
    - [Core Architecture Patterns](./backend-architecture.md#core-architecture-patterns)
      - [1. Event-Driven Architecture (EDA)](./backend-architecture.md#1-event-driven-architecture-eda)
      - [2. Repository Pattern](./backend-architecture.md#2-repository-pattern)
      - [3. Command Query Responsibility Segregation (CQRS)](./backend-architecture.md#3-command-query-responsibility-segregation-cqrs)
      - [4. Domain-Driven Design (DDD)](./backend-architecture.md#4-domain-driven-design-ddd)
    - [Service Layer Design](./backend-architecture.md#service-layer-design)
      - [1. Multi-Timeframe (MTF) Engine Service](./backend-architecture.md#1-multi-timeframe-mtf-engine-service)
      - [2. Position Manager Service](./backend-architecture.md#2-position-manager-service)
      - [3. Indicator Pipeline Service](./backend-architecture.md#3-indicator-pipeline-service)
      - [4. Algorithm Execution Service](./backend-architecture.md#4-algorithm-execution-service)
    - [Data Access Layer](./backend-architecture.md#data-access-layer)
      - [1. DuckDB Integration](./backend-architecture.md#1-duckdb-integration)
      - [2. Tick Data Storage Strategy](./backend-architecture.md#2-tick-data-storage-strategy)
      - [3. Caching Strategy](./backend-architecture.md#3-caching-strategy)
    - [Algorithm Integration](./backend-architecture.md#algorithm-integration)
      - [1. PyO3 Bridge Architecture](./backend-architecture.md#1-pyo3-bridge-architecture)
      - [2. Python Environment Management](./backend-architecture.md#2-python-environment-management)
      - [3. Custom Indicator Framework](./backend-architecture.md#3-custom-indicator-framework)
    - [State Management](./backend-architecture.md#state-management)
      - [1. Multi-Timeframe State](./backend-architecture.md#1-multi-timeframe-state)
      - [2. Position State Tracking](./backend-architecture.md#2-position-state-tracking)
      - [3. Order State Management](./backend-architecture.md#3-order-state-management)
    - [Performance Optimizations](./backend-architecture.md#performance-optimizations)
      - [1. Zero-Copy Operations](./backend-architecture.md#1-zero-copy-operations)
      - [2. Memory Pools](./backend-architecture.md#2-memory-pools)
      - [3. SIMD Optimizations](./backend-architecture.md#3-simd-optimizations)
  - [Data Architecture](./data-architecture.md)
    - [Database Design](./data-architecture.md#database-design)
      - [1. DuckDB Schema Design](./data-architecture.md#1-duckdb-schema-design)
      - [2. Core Tables Schema](./data-architecture.md#2-core-tables-schema)
      - [3. Specialized Indexes](./data-architecture.md#3-specialized-indexes)
    - [Data Models](./data-architecture.md#data-models)
      - [1. Tick Data Model](./data-architecture.md#1-tick-data-model)
      - [2. OHLCV Bar Model](./data-architecture.md#2-ohlcv-bar-model)
      - [3. Position and Order Models](./data-architecture.md#3-position-and-order-models)
      - [4. Backtest Results Model](./data-architecture.md#4-backtest-results-model)
    - [Data Flow & Pipelines](./data-architecture.md#data-flow-pipelines)
      - [1. Data Ingestion Pipeline](./data-architecture.md#1-data-ingestion-pipeline)
      - [2. Bar Aggregation Pipeline](./data-architecture.md#2-bar-aggregation-pipeline)
      - [3. Query Optimization Pipeline](./data-architecture.md#3-query-optimization-pipeline)
    - [Caching Strategy](./data-architecture.md#caching-strategy)
      - [1. L1 Cache (In-Memory)](./data-architecture.md#1-l1-cache-in-memory)
      - [2. L2 Cache (Compressed Memory)](./data-architecture.md#2-l2-cache-compressed-memory)
      - [3. Prefetching Strategy](./data-architecture.md#3-prefetching-strategy)
    - [Data Persistence](./data-architecture.md#data-persistence)
      - [1. Backup Strategy](./data-architecture.md#1-backup-strategy)
      - [2. Recovery System](./data-architecture.md#2-recovery-system)
      - [3. Migration System](./data-architecture.md#3-migration-system)
    - [Performance Considerations](./data-architecture.md#performance-considerations)
      - [1. Partitioning Strategy](./data-architecture.md#1-partitioning-strategy)
      - [2. Compression Optimization](./data-architecture.md#2-compression-optimization)
      - [3. Query Optimization](./data-architecture.md#3-query-optimization)
  - [Frontend Architecture](./frontend-architecture.md)
    - [Component Architecture](./frontend-architecture.md#component-architecture)
      - [1. Layout System](./frontend-architecture.md#1-layout-system)
      - [2. Chart Components](./frontend-architecture.md#2-chart-components)
      - [3. Control Interfaces](./frontend-architecture.md#3-control-interfaces)
    - [State Management](./frontend-architecture.md#state-management)
      - [1. Zustand Stores](./frontend-architecture.md#1-zustand-stores)
      - [2. React Query Integration](./frontend-architecture.md#2-react-query-integration)
    - [Real-time Data Handling](./frontend-architecture.md#real-time-data-handling)
      - [1. WebSocket/IPC Communication](./frontend-architecture.md#1-websocketipc-communication)
      - [2. Data Streaming](./frontend-architecture.md#2-data-streaming)
    - [UI/UX Design Patterns](./frontend-architecture.md#uiux-design-patterns)
      - [1. Responsive Layout System](./frontend-architecture.md#1-responsive-layout-system)
      - [2. Theming System](./frontend-architecture.md#2-theming-system)
      - [3. Accessibility Features](./frontend-architecture.md#3-accessibility-features)
    - [Performance Optimizations](./frontend-architecture.md#performance-optimizations)
      - [1. React Memoization](./frontend-architecture.md#1-react-memoization)
      - [2. Virtual Scrolling](./frontend-architecture.md#2-virtual-scrolling)
      - [3. Canvas Rendering](./frontend-architecture.md#3-canvas-rendering)
    - [Electron Integration](./frontend-architecture.md#electron-integration)
      - [1. Main/Renderer Process Architecture](./frontend-architecture.md#1-mainrenderer-process-architecture)
      - [2. Preload Script](./frontend-architecture.md#2-preload-script)
  - [API Design](./api-design.md)
    - [IPC Protocol Design](./api-design.md#ipc-protocol-design)
      - [Protocol Overview & Specification](./api-design.md#protocol-overview-specification)
      - [1. MessagePack Protocol Foundation](./api-design.md#1-messagepack-protocol-foundation)
      - [2. Request/Response Patterns](./api-design.md#2-requestresponse-patterns)
      - [3. Connection Management](./api-design.md#3-connection-management)
    - [Message Types & Contracts](./api-design.md#message-types-contracts)
      - [1. Data Streaming Messages](./api-design.md#1-data-streaming-messages)
      - [2. Control Commands](./api-design.md#2-control-commands)
      - [3. Status Updates](./api-design.md#3-status-updates)
    - [Error Handling](./api-design.md#error-handling)
      - [1. Error Codes & Classification](./api-design.md#1-error-codes-classification)
      - [2. Recovery Strategies](./api-design.md#2-recovery-strategies)
    - [Real-time Communication](./api-design.md#real-time-communication)
      - [1. Streaming Architecture](./api-design.md#1-streaming-architecture)
      - [2. Data Buffering & Batching](./api-design.md#2-data-buffering-batching)
    - [State Synchronization](./api-design.md#state-synchronization)
      - [1. State Management Architecture](./api-design.md#1-state-management-architecture)
      - [2. Conflict Resolution](./api-design.md#2-conflict-resolution)
    - [Performance Considerations](./api-design.md#performance-considerations)
      - [1. Batching Strategies](./api-design.md#1-batching-strategies)
      - [2. Compression & Serialization](./api-design.md#2-compression-serialization)
      - [3. Connection Pooling & Throttling](./api-design.md#3-connection-pooling-throttling)
  - [Security Architecture](./security-architecture.md)
    - [Overview](./security-architecture.md#overview)
    - [1. Application Security](./security-architecture.md#1-application-security)
      - [Code Signing & Integrity](./security-architecture.md#code-signing-integrity)
      - [Binary Protection](./security-architecture.md#binary-protection)
    - [2. Data Security](./security-architecture.md#2-data-security)
      - [Encryption at Rest](./security-architecture.md#encryption-at-rest)
      - [Secure Storage Implementation](./security-architecture.md#secure-storage-implementation)
    - [3. Algorithm Sandboxing](./security-architecture.md#3-algorithm-sandboxing)
      - [Python Execution Isolation](./security-architecture.md#python-execution-isolation)
    - [4. IPC Security](./security-architecture.md#4-ipc-security)
      - [Context Isolation](./security-architecture.md#context-isolation)
      - [Secure Channel Implementation](./security-architecture.md#secure-channel-implementation)
    - [5. User Authentication](./security-architecture.md#5-user-authentication)
      - [Local Authentication System](./security-architecture.md#local-authentication-system)
    - [6. Security Best Practices](./security-architecture.md#6-security-best-practices)
      - [Secure Development Guidelines](./security-architecture.md#secure-development-guidelines)
      - [Security Monitoring](./security-architecture.md#security-monitoring)
    - [Summary](./security-architecture.md#summary)
  - [Testing Strategy](./testing-strategy.md)
    - [Overview](./testing-strategy.md#overview)
    - [1. Testing Philosophy](./testing-strategy.md#1-testing-philosophy)
      - [Testing Pyramid Approach](./testing-strategy.md#testing-pyramid-approach)
      - [Quality Gates and Testing Standards](./testing-strategy.md#quality-gates-and-testing-standards)
    - [2. Unit Testing Strategy](./testing-strategy.md#2-unit-testing-strategy)
      - [Rust Core Engine Testing](./testing-strategy.md#rust-core-engine-testing)
      - [Python Algorithm Testing](./testing-strategy.md#python-algorithm-testing)
      - [TypeScript Frontend Testing](./testing-strategy.md#typescript-frontend-testing)
    - [3. Integration Testing Strategy](./testing-strategy.md#3-integration-testing-strategy)
      - [IPC Communication Testing](./testing-strategy.md#ipc-communication-testing)
      - [Database Integration Testing](./testing-strategy.md#database-integration-testing)
      - [Algorithm Integration Testing](./testing-strategy.md#algorithm-integration-testing)
    - [4. End-to-End Testing Strategy](./testing-strategy.md#4-end-to-end-testing-strategy)
      - [Full Application Workflow Testing](./testing-strategy.md#full-application-workflow-testing)
    - [5. Performance Testing Strategy](./testing-strategy.md#5-performance-testing-strategy)
      - [Load Testing and Benchmarking](./testing-strategy.md#load-testing-and-benchmarking)
    - [6. Financial Accuracy Testing Strategy](./testing-strategy.md#6-financial-accuracy-testing-strategy)
      - [Backtesting Validation and Numerical Precision](./testing-strategy.md#backtesting-validation-and-numerical-precision)
    - [Summary](./testing-strategy.md#summary)
  - [DevOps & Deployment](./devops-deployment.md)
    - [Overview](./devops-deployment.md#overview)
    - [1. Build Pipeline](./devops-deployment.md#1-build-pipeline)
      - [Windows-Focused Build System](./devops-deployment.md#windows-focused-build-system)
      - [Build Configuration](./devops-deployment.md#build-configuration)
      - [Electron Build Configuration](./devops-deployment.md#electron-build-configuration)
    - [2. Testing Automation](./devops-deployment.md#2-testing-automation)
      - [Test Strategy Overview](./devops-deployment.md#test-strategy-overview)
      - [Frontend Testing](./devops-deployment.md#frontend-testing)
      - [End-to-End Testing](./devops-deployment.md#end-to-end-testing)
    - [3. Release Management](./devops-deployment.md#3-release-management)
      - [Versioning Strategy](./devops-deployment.md#versioning-strategy)
      - [Automated Release Process](./devops-deployment.md#automated-release-process)
      - [Changelog Generation](./devops-deployment.md#changelog-generation)
    - [4. Distribution Strategy](./devops-deployment.md#4-distribution-strategy)
      - [Code Signing Configuration](./devops-deployment.md#code-signing-configuration)
      - [Installer Configuration](./devops-deployment.md#installer-configuration)
    - [5. Update Mechanism](./devops-deployment.md#5-update-mechanism)
      - [Auto-Update System](./devops-deployment.md#auto-update-system)
    - [6. Monitoring & Analytics](./devops-deployment.md#6-monitoring-analytics)
      - [Crash Reporting System](./devops-deployment.md#crash-reporting-system)
      - [Usage Analytics](./devops-deployment.md#usage-analytics)
    - [Summary](./devops-deployment.md#summary)
  - [Performance Considerations](./performance-considerations.md)
    - [Overview](./performance-considerations.md#overview)
      - [Core Performance Requirements](./performance-considerations.md#core-performance-requirements)
    - [1. Performance Requirements](./performance-considerations.md#1-performance-requirements)
      - [Quantified Performance Targets](./performance-considerations.md#quantified-performance-targets)
      - [Performance Monitoring Framework](./performance-considerations.md#performance-monitoring-framework)
    - [2. Backend Performance](./performance-considerations.md#2-backend-performance)
      - [Rust Performance Optimizations](./performance-considerations.md#rust-performance-optimizations)
      - [Memory Management Strategy](./performance-considerations.md#memory-management-strategy)
      - [Concurrency Optimizations](./performance-considerations.md#concurrency-optimizations)
    - [3. Frontend Performance](./performance-considerations.md#3-frontend-performance)
      - [React Optimization Strategies](./performance-considerations.md#react-optimization-strategies)
      - [Canvas Rendering Optimizations](./performance-considerations.md#canvas-rendering-optimizations)
      - [Virtual Scrolling Implementation](./performance-considerations.md#virtual-scrolling-implementation)
    - [4. Data Performance](./performance-considerations.md#4-data-performance)
      - [DuckDB Query Optimizations](./performance-considerations.md#duckdb-query-optimizations)
      - [Caching Strategy Implementation](./performance-considerations.md#caching-strategy-implementation)
      - [Compression and Serialization](./performance-considerations.md#compression-and-serialization)
    - [5. Real-time Performance](./performance-considerations.md#5-real-time-performance)
      - [Streaming Data Pipeline](./performance-considerations.md#streaming-data-pipeline)
      - [Latency Optimization Techniques](./performance-considerations.md#latency-optimization-techniques)
    - [6. Scalability Considerations](./performance-considerations.md#6-scalability-considerations)
      - [Memory Usage Optimization](./performance-considerations.md#memory-usage-optimization)
      - [Disk I/O Optimization](./performance-considerations.md#disk-io-optimization)
      - [Performance Monitoring and Alerting](./performance-considerations.md#performance-monitoring-and-alerting)
    - [Summary](./performance-considerations.md#summary)
  - [Infrastructure Sequencing](./infrastructure-sequencing.md)
    - [Overview](./infrastructure-sequencing.md#overview)
    - [Critical Sequencing Dependencies](./infrastructure-sequencing.md#critical-sequencing-dependencies)
    - [1. API Framework and Service Architecture Establishment](./infrastructure-sequencing.md#1-api-framework-and-service-architecture-establishment)
    - [2. CI/CD Pipeline Establishment Sequence](./infrastructure-sequencing.md#2-cicd-pipeline-establishment-sequence)
    - [3. Testing Framework Setup Timing](./infrastructure-sequencing.md#3-testing-framework-setup-timing)
    - [4. Environment Configuration Sequencing](./infrastructure-sequencing.md#4-environment-configuration-sequencing)
    - [5. External Dependencies and Credential Management](./infrastructure-sequencing.md#5-external-dependencies-and-credential-management)
    - [Revised Epic 1 Structure](./infrastructure-sequencing.md#revised-epic-1-structure)
    - [Implementation Timeline](./infrastructure-sequencing.md#implementation-timeline)
    - [Success Criteria](./infrastructure-sequencing.md#success-criteria)
  - [Documentation](./documentation.md)
    - [Documentation Strategy](./documentation.md#documentation-strategy)
    - [Architecture Documentation](./documentation.md#architecture-documentation)
      - [Core Architecture Documents](./documentation.md#core-architecture-documents)
      - [Architecture Maintenance](./documentation.md#architecture-maintenance)
    - [API Documentation](./documentation.md#api-documentation)
      - [IPC Protocol Documentation](./documentation.md#ipc-protocol-documentation)
      - [Rust API Documentation](./documentation.md#rust-api-documentation)
      - [Python API Documentation](./documentation.md#python-api-documentation)
    - [Developer Documentation](./documentation.md#developer-documentation)
      - [Setup and Development Guides](./documentation.md#setup-and-development-guides)
      - [Contribution Guidelines](./documentation.md#contribution-guidelines)
      - [Onboarding Documentation](./documentation.md#onboarding-documentation)
    - [User Documentation](./documentation.md#user-documentation)
      - [Algorithm Development Guide](./documentation.md#algorithm-development-guide)
      - [User Interface Guide](./documentation.md#user-interface-guide)
      - [Troubleshooting Guide](./documentation.md#troubleshooting-guide)
    - [Deployment Documentation](./documentation.md#deployment-documentation)
      - [Build Process Documentation](./documentation.md#build-process-documentation)
      - [Distribution Documentation](./documentation.md#distribution-documentation)
      - [Configuration Management](./documentation.md#configuration-management)
    - [Maintenance Documentation](./documentation.md#maintenance-documentation)
      - [System Monitoring](./documentation.md#system-monitoring)
      - [Troubleshooting Procedures](./documentation.md#troubleshooting-procedures)
      - [Maintenance Procedures](./documentation.md#maintenance-procedures)
      - [Support Documentation](./documentation.md#support-documentation)
    - [Documentation Infrastructure](./documentation.md#documentation-infrastructure)
      - [Documentation Tooling](./documentation.md#documentation-tooling)
      - [Maintenance Workflow](./documentation.md#maintenance-workflow)
    - [Documentation Success Metrics](./documentation.md#documentation-success-metrics)
      - [Quantitative Metrics](./documentation.md#quantitative-metrics)
      - [Qualitative Assessment](./documentation.md#qualitative-assessment)
